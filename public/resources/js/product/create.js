(()=>{function t(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,i,o,c=[],l=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);l=!0);}catch(t){s=!0,a=t}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(s)throw a}}return c}}(t,r)||function(t,r){if(!t)return;if("string"==typeof t)return e(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(t,r)}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var r=new Quill("#product-description-editor",{modules:{toolbar:[[{header:[1,2,!1]}],["bold","italic","underline"],["image","code-block"]]},theme:"snow"}),n=[];new Dropzone("#add_product_media",{url:"#",paramName:"file",maxFiles:10,maxFilesize:10,addRemoveLinks:!0,accept:function(t,e){n.push({name:t.name,file:t})}});$("#discount-deadline-picker").flatpickr();var a=1;$("#add-variant-btn").click((function(t){t.preventDefault();var e=$(".variant").last(),r=e.clone();r.find("input").val(""),a++,r.attr("id","variant-"+a),r.find("a").css({opacity:1,cursor:"pointer"}),r.find(".variant-error-message").first().html(""),e.after(r)})),$(document).on("click",".remove-variant-btn",(function(t){t.preventDefault(),1==$(this).css("opacity")&&$(this).parent().parent().parent().remove()})),$("#submit-btn").on("click",(function(e){if(e.preventDefault(),!function(){$(".variant-error-message").html("");var t=!1;return $(".variant").each((function(){var e=!1;$(this).find("select").each((function(){$(this).val()||(e=!0)})),$(this).find("input").each((function(){$(this).val()||(e=!0)})),e&&(t=!0,$(this).find(".variant-error-message").html("<small>Trường bắt buộc</small>"))})),t}()){var a=r.root.innerHTML;$("#product-description").val(a);var i=new FormData(document.getElementById("kt_ecommerce_add_product_form"));n.forEach((function(t){i.append("images[]",t.file,t.name)})),$.ajax({type:"POST",enctype:"multipart/form-data",url:"/products",data:i,processData:!1,contentType:!1,cache:!1,success:function(){window.localStorage.setItem("success","Thêm mới thành công!"),window.location.href="/products"},error:function(e){422===e.status&&($(".error-message").each((function(){$(this).html("");var t=$(this).parent().children("input");t&&t.removeClass("is-invalid")})),Object.entries(e.responseJSON.errors).forEach((function(e){var r=t(e,2),n=r[0],a=r[1];$("#error-message-".concat(n)).append("<small>".concat(a[0],"</small>")),$("#error-message-".concat(n)).css("display","block");var i=$("#error-message-".concat(n)).parent().children("input");i&&i.addClass("is-invalid")})))}})}}))})();
//# sourceMappingURL=create.js.map