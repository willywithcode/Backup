{"version":3,"file":"/resources/js/product/edit.js","mappings":"MACA,IAAIA,EAAa,IAAIC,MAAM,8BAA+B,CACtDC,QAAS,CACLC,QAAS,CACL,CAAC,CACGC,OAAQ,CAAC,EAAG,GAAG,KAEnB,CAAC,OAAQ,SAAU,aACnB,CAAC,QAAS,gBAGlBC,MAAO,SAEXL,EAAWM,KAAKC,UAAYC,EAAE,wBAAwBC,MAGtD,IAAMC,EAAYF,EAAE,qBAAqBC,MAErCE,EAAa,IAAIC,SAAS,qBAAsB,CAChDC,IAAK,aAAFC,OAAeJ,EAAS,WAC3BK,UAAW,QACXC,SAAU,GACVC,YAAa,GACbC,gBAAgB,EAChBC,QAAS,CACL,eAAgBX,EAAE,2BAA2BY,KAAK,YAEtDC,OAAQ,SAAUC,EAAMC,GACpBA,GACJ,EACAC,YAAa,SAAUF,GACnBd,EAAEiB,KAAK,CACHC,KAAM,SACNb,IAAK,aAAFC,OAAeJ,EAAS,YAAAI,OAAWQ,EAAKK,IAC3CC,QAAS,SAAUC,GAIf,OAH2B,MAAvBP,EAAKQ,gBAA4D,MAAlCR,EAAKQ,eAAeC,YACnDT,EAAKQ,eAAeC,WAAWC,YAAYV,EAAKQ,gBAE7CG,KAAKC,6BAChB,GAER,IAGJ1B,EAAE,6BAA6B2B,YAE/B3B,EAAEiB,KAAK,CACHC,KAAM,MACNb,IAAK,aAAFC,OAAeJ,EAAS,WAC3BkB,QAAS,SAAUC,GACfA,EAAKO,SAAQ,SAACC,GACV,IAAIC,EAAW,CAAEC,KAAM,QAASC,KAAM,IAAMb,GAAIU,EAAMV,IACtDhB,EAAW8B,oBAAoBH,EAAUD,EAAMK,KACnD,GACJ,IAIJlC,EAAE,eAAemC,GAAG,SAAS,SAACC,GAG1B,GAFAA,EAAEC,kBAmCN,WACIrC,EAAE,0BAA0BsC,KAAK,IAEjC,IAAIC,GAAW,EAuBf,OAtBAvC,EAAE,YAAYwC,MAAK,WACf,IAAIC,GAAU,EACdzC,EAAEyB,MAAMiB,KAAK,UAAUF,MAAK,WACnBxC,EAAEyB,MAAMxB,QAETwC,GAAU,EAGlB,IACAzC,EAAEyB,MAAMiB,KAAK,SAASF,MAAK,WAClBxC,EAAEyB,MAAMxB,QAETwC,GAAU,EAGlB,IACIA,IACAF,GAAW,EACXvC,EAAEyB,MAAMiB,KAAK,0BAA0BJ,KAAK,kCAEpD,IAEOC,CACX,CA5DQI,GAAJ,CAIA,IAAMC,EAAcpD,EAAWM,KAAKC,UACpCC,EAAE,wBAAwBC,IAAI2C,GAC9B5C,EAAE,kCAAkC6C,QAJpC,CAKJ,IAEA,IAAIC,EAAY9C,EAAE,0BAA0BC,MAE5CD,EAAE,oBAAoB+C,OAAM,SAAUX,GAClCA,EAAEC,iBACF,IAAIW,EAAUhD,EAAE,YAAYiD,OACxBC,EAASF,EAAQG,QACrBD,EAAOR,KAAK,SAASzC,IAAI,IACzB6C,IACAI,EAAOtC,KAAK,KAAM,WAAakC,GAC/BI,EAAOR,KAAK,KAAKU,IAAI,CACjB,QAAW,EACX,OAAU,YAEdF,EAAOR,KAAK,0BAA0BW,QAAQf,KAAK,IACnDU,EAAQM,MAAMJ,EAClB,IAEAlD,EAAEuD,UAAUpB,GAAG,QAAS,uBAAuB,SAASC,GACpDA,EAAEC,iBAC4B,GAA1BrC,EAAEyB,MAAM2B,IAAI,YACZpD,EAAEyB,MAAM+B,SAASA,SAASA,SAASC,QAE3C,G","sources":["webpack:///./resources/js/product/edit.js"],"sourcesContent":["// Description editor\nvar fullEditor = new Quill('#product-description-editor', {\n    modules: {\n        toolbar: [\n            [{\n                header: [1, 2, false]\n            }],\n            ['bold', 'italic', 'underline'],\n            ['image', 'code-block']\n        ]\n    },\n    theme: 'snow' // or 'bubble'\n});\nfullEditor.root.innerHTML = $('#product-description').val();\n\n// Dropzone product images\nconst productId = $('#product-id-value').val();\n\nvar myDropzone = new Dropzone(\"#add_product_media\", {\n    url: `/products/${productId}/images`,\n    paramName: 'image', // The name that will be used to transfer the file\n    maxFiles: 10,\n    maxFilesize: 10, // MB\n    addRemoveLinks: true,\n    headers: {\n        'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content'),\n    },\n    accept: function (file, done) {\n        done();\n    },\n    removedfile: function (file) {\n        $.ajax({\n            type: 'DELETE',\n            url: `/products/${productId}/images/${file.id}`,\n            success: function (data) {\n                if (file.previewElement != null && file.previewElement.parentNode != null) {\n                    file.previewElement.parentNode.removeChild(file.previewElement);\n                }\n                return this._updateMaxFilesReachedClass();\n            },\n        });\n    },\n});\n\n$(\"#discount-deadline-picker\").flatpickr();\n\n$.ajax({\n    type: 'GET',\n    url: `/products/${productId}/images`,\n    success: function (data) {\n        data.forEach((image) => {\n            let mockFile = { name: 'Image', size: 1000, id: image.id };\n            myDropzone.displayExistingFile(mockFile, image.link);\n        });\n    },\n});\n\n// Add product submit\n$('#submit-btn').on('click', (e) => {\n    e.preventDefault();\n\n    if (validateProductVariants()) {\n        return;\n    }\n\n    const description = fullEditor.root.innerHTML;\n    $('#product-description').val(description);\n    $('#kt_ecommerce_add_product_form').submit();\n});\n\nlet variantId = $('#product-variant-count').val();\n// Add product variant\n$('#add-variant-btn').click(function (e) {\n    e.preventDefault();\n    var lastRow = $('.variant').last(); // select the last row\n    var newRow = lastRow.clone(); // clone the last row\n    newRow.find('input').val(''); // clear the values of the inputs in the new row\n    variantId++;\n    newRow.attr('id', 'variant-' + variantId);\n    newRow.find('a').css({\n        'opacity': 1,\n        'cursor': 'pointer',\n    });\n    newRow.find('.variant-error-message').first().html('');\n    lastRow.after(newRow); // insert the new row after the last row\n});\n\n$(document).on('click', '.remove-variant-btn', function(e) {\n    e.preventDefault();\n    if ($(this).css('opacity') == 1) {\n        $(this).parent().parent().parent().remove();\n    }\n});\n\nfunction validateProductVariants() {\n    $('.variant-error-message').html('');\n\n    let hasError = false;\n    $('.variant').each(function() {\n        let isError = false;\n        $(this).find('select').each(function() {\n            if (!$(this).val()) {\n                // $(this).addClass('is-invalid');\n                isError = true;\n                return;\n            }\n        });\n        $(this).find('input').each(function() {\n            if (!$(this).val()) {\n                // $(this).addClass('is-invalid');\n                isError = true;\n                return;\n            }\n        });\n        if (isError) {\n            hasError = true;\n            $(this).find('.variant-error-message').html(`<small>Trường bắt buộc</small>`)\n        }\n    });\n\n    return hasError;\n}\n"],"names":["fullEditor","Quill","modules","toolbar","header","theme","root","innerHTML","$","val","productId","myDropzone","Dropzone","url","concat","paramName","maxFiles","maxFilesize","addRemoveLinks","headers","attr","accept","file","done","removedfile","ajax","type","id","success","data","previewElement","parentNode","removeChild","this","_updateMaxFilesReachedClass","flatpickr","forEach","image","mockFile","name","size","displayExistingFile","link","on","e","preventDefault","html","hasError","each","isError","find","validateProductVariants","description","submit","variantId","click","lastRow","last","newRow","clone","css","first","after","document","parent","remove"],"sourceRoot":""}