(()=>{var e=new Quill("#product-description-editor",{modules:{toolbar:[[{header:[1,2,!1]}],["bold","italic","underline"],["image","code-block"]]},theme:"snow"});e.root.innerHTML=$("#product-description").val();var t=$("#product-id-value").val(),a=new Dropzone("#add_product_media",{url:"/products/".concat(t,"/images"),paramName:"image",maxFiles:10,maxFilesize:10,addRemoveLinks:!0,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},accept:function(e,t){t()},removedfile:function(e){$.ajax({type:"DELETE",url:"/products/".concat(t,"/images/").concat(e.id),success:function(t){return null!=e.previewElement&&null!=e.previewElement.parentNode&&e.previewElement.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()}})}});$("#discount-deadline-picker").flatpickr(),$.ajax({type:"GET",url:"/products/".concat(t,"/images"),success:function(e){e.forEach((function(e){var t={name:"Image",size:1e3,id:e.id};a.displayExistingFile(t,e.link)}))}}),$("#submit-btn").on("click",(function(t){if(t.preventDefault(),!function(){$(".variant-error-message").html("");var e=!1;return $(".variant").each((function(){var t=!1;$(this).find("select").each((function(){$(this).val()||(t=!0)})),$(this).find("input").each((function(){$(this).val()||(t=!0)})),t&&(e=!0,$(this).find(".variant-error-message").html("<small>Trường bắt buộc</small>"))})),e}()){var a=e.root.innerHTML;$("#product-description").val(a),$("#kt_ecommerce_add_product_form").submit()}}));var n=$("#product-variant-count").val();$("#add-variant-btn").click((function(e){e.preventDefault();var t=$(".variant").last(),a=t.clone();a.find("input").val(""),n++,a.attr("id","variant-"+n),a.find("a").css({opacity:1,cursor:"pointer"}),a.find(".variant-error-message").first().html(""),t.after(a)})),$(document).on("click",".remove-variant-btn",(function(e){e.preventDefault(),1==$(this).css("opacity")&&$(this).parent().parent().parent().remove()}))})();
//# sourceMappingURL=edit.js.map