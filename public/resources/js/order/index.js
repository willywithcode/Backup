(()=>{var t=new URLSearchParams(window.location.search),e=t.get("from"),n=t.get("to"),o=t.get("keyword"),r=t.get("status"),a=t.get("total");o&&$(".keyword-filter").val(o),r?$(".status-filter").val(r):$(".status-filter").val("-1"),a?$(".total-filter").val(a):$(".total-filter").val("-1"),$(".status-filter").on("input",(function(){var e=$(this).val();e&&"-1"!==e&&(t.delete("status"),t.append("status",e),window.location.href="/orders?".concat(t.toString())),"-1"===e&&(t.delete("status"),window.location.href="/orders?".concat(t.toString()))})),$(".total-filter").on("input",(function(){var e=$(this).val();e&&"-1"!==e&&(t.delete("total"),t.append("total",e),window.location.href="/orders?".concat(t.toString())),"-1"===e&&(t.delete("total"),window.location.href="/orders?".concat(t.toString()))})),$(".keyword-filter").keyup((function(e){var n=$(this).val();t.delete("keyword"),t.append("keyword",n),13===e.which&&(window.location.href="/orders?".concat(t.toString()))})),$(".cancel-btn").click((function(t){var e=$(t.target).data("url");$(t.target).data("id");Swal.fire({title:"Bạn có chắc chắn muốn huỷ đơn hàng?",icon:"warning",buttonsStyling:!1,showCancelButton:!0,confirmButtonText:"Xác nhận",cancelButtonText:"Hủy thao tác",customClass:{confirmButton:"btn btn-danger",cancelButton:"btn btn-light"}}).then((function(t){t.isConfirmed&&$.ajax({type:"DELETE",url:e,success:function(t){window.localStorage.setItem("success","Huỷ đơn hàng thành công!"),window.location.href="/orders"}})}))})),$(".confirm-btn").click((function(t){var e=$(t.target).data("url");$.ajax({type:"PUT",url:e,data:{status:"confirmed"},success:function(t){window.localStorage.setItem("success","Xác nhận đơn hàng thành công!"),window.location.href="/orders"}})})),$(".status-select").on("input",(function(){var t=$(this).val(),e=$(this).data("url");t&&$.ajax({type:"PUT",url:e,data:{status:t},success:function(t){window.localStorage.setItem("success","Cập nhật trạng thái đơn hàng thành công!"),window.location.href="/orders"}})}));var c,l,i,s,u,d,f,w=(d=function(e,n,o){var r,a,c=n.split(" - ");s=null!==(r=c[0])&&void 0!==r?r:null,u=null!==(a=c[1])&&void 0!==a?a:null,s&&u&&(t.delete("from"),t.delete("to"),t.append("from",s),t.append("to",u),window.location.href="/orders?".concat(t.toString())),s||u||(t.delete("from"),t.delete("to"),window.location.href="/orders?".concat(t.toString()))},f=function(){c.querySelectorAll('[data-kt-ecommerce-order-filter="delete_row"]').forEach((function(t){t.addEventListener("click",(function(t){t.preventDefault();var e=t.target.closest("tr"),n=e.querySelector('[data-kt-ecommerce-order-filter="order_id"]').innerText;Swal.fire({text:"Are you sure you want to delete order: "+n+"?",icon:"warning",showCancelButton:!0,buttonsStyling:!1,confirmButtonText:"Yes, delete!",cancelButtonText:"No, cancel",customClass:{confirmButton:"btn fw-bold btn-danger",cancelButton:"btn fw-bold btn-active-light-primary"}}).then((function(t){t.value?Swal.fire({text:"You have deleted "+n+"!.",icon:"success",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn fw-bold btn-primary"}}).then((function(){l.row($(e)).remove().draw()})):"cancel"===t.dismiss&&Swal.fire({text:n+" was not deleted.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn fw-bold btn-primary"}})}))}))}))},{init:function(){var t;(c=document.querySelector("#kt_ecommerce_sales_table"))&&((l=$(c).DataTable({info:!1,order:[],pageLength:10,columnDefs:[{orderable:!1,targets:6}]})).on("draw",(function(){f()})),t=document.querySelector("#kt_ecommerce_sales_flatpickr"),i=$(t).flatpickr({altInput:!0,altFormat:"d/m/Y",dateFormat:"Y-m-d",defaultDate:[e,n],locale:{rangeSeparator:" - "},mode:"range",onChange:function(t,e,n){d(t,e,n)}}),f(),document.querySelector("#kt_ecommerce_sales_flatpickr_clear").addEventListener("click",(function(t){i.clear()})))}});KTUtil.onDOMContentLoaded((function(){w.init()}))})();
//# sourceMappingURL=index.js.map